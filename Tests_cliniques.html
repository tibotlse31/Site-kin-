<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Tests Cliniques</title>

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <!-- Bootstrap Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet" />

  <style>
    body {
      background-color: #f7f9fa;
      font-family: 'Open Sans', sans-serif;
      padding: 20px;
      color: #333;
    }

    h1 {
      color: #2BAE66;
      text-align: center;
      margin-bottom: 30px;
    }

    .section-card {
      background: #f2f7fb;
      border-left: 4px solid #2BAE66;
      padding: 15px;
      margin-bottom: 15px;
      border-radius: 6px;
    }

    .section-card h6 {
      font-weight: bold;
      color: #2BAE66;
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 8px;
    }

    .section-card p {
      margin: 0;
    }

    .card-test {
      cursor: pointer;
      transition: transform 0.2s;
    }

    .card-test:hover {
      transform: scale(1.02);
    }
  </style>
</head>
<body>
  <div class="container">
    <a href="index.html" class="btn btn-outline-success mb-3">
      ← Retour à l’accueil
    </a>

    <h1>Tests Cliniques</h1>

    <!-- Zone pour les cartes de tests -->
    <div id="testsContainer" class="row g-3"></div>
  </div>

  <!-- Modal -->
  <div class="modal fade" id="detailsModal" tabindex="-1" aria-labelledby="detailsModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-scrollable">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="detailsModalLabel"></h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Fermer"></button>
        </div>
        <div class="modal-body">
          <div class="section-card">
            <h6><i class="bi bi-geo-alt"></i> Région</h6>
            <p id="modalRegion"></p>
          </div>

          <div class="section-card">
            <h6><i class="bi bi-activity"></i> Pathologie</h6>
            <p id="modalPathologie"></p>
          </div>

          <div class="section-card">
            <h6><i class="bi bi-tools"></i> Mise en œuvre</h6>
            <p id="modalMiseEnOeuvre"></p>
          </div>

          <div class="section-card">
            <h6><i class="bi bi-search"></i> Interprétation</h6>
            <p id="modalInterpretation"></p>
          </div>

          <div class="section-card">
            <h6><i class="bi bi-chat-left-text"></i> Remarques</h6>
            <p id="modalRemarques"></p>
          </div>

          <div class="section-card">
            <h6><i class="bi bi-graph-up"></i> Clinimétrie</h6>
            <p id="modalClinimetrie"></p>
          </div>

          <div class="section-card">
            <h6><i class="bi bi-journal-text"></i> Référence clinimétrie</h6>
            <p id="modalReference"></p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

  <script>
    let data = [];

    fetch('Tests_cliniques.json')
      .then(response => response.json())
      .then(json => {
        data = json;
        displayTests(data);
      })
      .catch(err => console.error(err));

    function displayTests(data) {
      const container = document.getElementById('testsContainer');
      container.innerHTML = '';

      data.forEach(test => {
        const col = document.createElement('div');
        col.className = 'col-md-4';

        const card = document.createElement('div');
        card.className = 'card card-test h-100 shadow-sm';
        card.addEventListener('click', () => showDetails(test));

        const cardBody = document.createElement('div');
        cardBody.className = 'card-body';

        const title = document.createElement('h5');
        title.className = 'card-title text-success';
        title.textContent = test.Test || 'Test sans nom';

        const region = document.createElement('p');
        region.className = 'card-text mb-1';
        region.innerHTML = `<i class="bi bi-geo-alt"></i> <strong>Région :</strong> ${test.Zone || ''}`;

        const pathologie = document.createElement('p');
        pathologie.className = 'card-text';
        pathologie.innerHTML = `<i class="bi bi-activity"></i> <strong>Pathologie :</strong> ${test["Pathologie/atteinte"] || ''}`;

        cardBody.appendChild(title);
        cardBody.appendChild(region);
        cardBody.appendChild(pathologie);
        card.appendChild(cardBody);
        col.appendChild(card);
        container.appendChild(col);
      });
    }

    function showDetails(test) {
      document.getElementById('detailsModalLabel').textContent = test.Test || 'Test sans nom';
      document.getElementById('modalRegion').textContent = test.Zone || 'Non renseigné.';
      document.getElementById('modalPathologie').textContent = test["Pathologie/atteinte"] || 'Non renseigné.';
      document.getElementById('modalMiseEnOeuvre').textContent = test["Mise en oeuvre"] || 'Non renseigné.';
      document.getElementById('modalInterpretation').textContent = test.Interpretation || 'Non renseigné.';
      document.getElementById('modalRemarques').textContent = test.Remarques || 'Non renseigné.';
      document.getElementById('modalClinimetrie').textContent = test.Clinimétrie || 'Non renseigné.';
      document.getElementById('modalReference').textContent = test["Référence clinimétrie"] || 'Non renseigné.';

      const modal = new bootstrap.Modal(document.getElementById('detailsModal'));
      modal.show();
    }
  </script>
</body>
</html>
